# 🎰 宝くじ予測・統計分析ガイド

## 📋 概要

このシステムは、ロト6・ナンバーズ3・ナンバーズ4の予測と、過去データの高度な統計分析を提供します。

## 🚀 クイックスタート

### 基本的な予測

```bash
# ロト6・ナンバーズ3・ナンバーズ4の基本予測
npx tsx examples/lottery-prediction.ts
```

### 高度な統計分析

```bash
# 過去データに基づく詳細な統計分析
npx tsx examples/lottery-advanced-analysis.ts
```

## 📊 提供される分析機能

### 1. 頻度分析
- **最頻出数字**: どの数字が最もよく出るか
- **最低出現数字**: どの数字が最も出にくいか
- **出現率**: 各数字の出現確率（パーセンテージ）
- **最終出現**: 各数字が何回前に出たか

### 2. パターン分析
- **奇数・偶数比**: バランスの分析
- **低い数字・高い数字比**: 数字範囲の分析
- **合計値の統計**: 平均と標準偏差
- **連続番号**: よく出る連続番号のペア

### 3. ペア分析
- どの数字の組み合わせが頻繁に出るか
- 相性の良い数字のペアを特定

### 4. 出現間隔分析
- 各数字の平均出現間隔
- 次に出る可能性の予測
- 「そろそろ出そう」な数字の特定

### 5. 予測強度分析
- **HOT数字**: 過去10回で頻出
- **WARM数字**: 過去20回で頻出
- **COLD数字**: 長期間出ていない
- **OVERDUE数字**: 平均以下の出現率

## 🎯 予測方法の種類

### ロト6

#### 1. ランダム予測
完全にランダムな数字の組み合わせ

```typescript
predictionMethod: 'random'
```

#### 2. 頻度ベース予測
過去によく出た数字を優先

```typescript
predictionMethod: 'frequency'
```

#### 3. HOT/COLDミックス予測
HOT数字4つ + COLD数字2つ

```typescript
predictionMethod: 'hot-cold'
```

#### 4. 統計的予測（推奨）
過去データの出現頻度に基づく重み付きランダム

```typescript
predictionMethod: 'statistical',
historicalData: [...] // 過去の当選番号
```

## 📈 統計分析の読み方

### 出現頻度
```
1位:  3番 - 7回出現 (17.5%), 最後の出現: 1回前
```
- 3番は40回中7回出現（17.5%の確率）
- 最後に出たのは1回前（最近出た）

### 出現間隔
```
【7番】
  平均出現間隔: 8.5回に1回
  予測: そろそろ出る可能性がある
```
- 7番は平均8.5回に1回出る
- 現在の間隔が平均を超えている場合、出る可能性が高まる

### パターン分析
```
奇数/偶数比: 125:115 (52.1% : 47.9%)
```
- 過去の傾向から、奇数がわずかに多い
- 予測時に奇数3-4個を含めると良い

```
合計値の平均: 142 ± 8
推奨範囲: 134 〜 150
```
- 6つの数字の合計が134-150になる組み合わせが統計的に妥当

## 💡 効果的な使い方

### ステップ1: 統計分析
過去データから傾向を把握

```bash
npx tsx examples/lottery-advanced-analysis.ts
```

### ステップ2: 推奨数字の確認
- HOT数字（最近よく出る）
- OVERDUE数字（そろそろ出そう）
- よく出るペア

### ステップ3: 予測の実行
統計的手法で数字を生成

```typescript
const result = await orchestrator.executeTask('Lottery Prediction Agent', {
  input: {
    lotteryType: 'loto6',
    predictionMethod: 'statistical',
    historicalData: yourData,
    count: 5,
  },
});
```

### ステップ4: 組み合わせの調整
- 合計値が推奨範囲内か確認
- 奇数・偶数のバランスをチェック
- 連続番号が多すぎないか確認
- よく出るペアを1-2組含める

## 📊 分析結果の例

### 実際の分析結果

```
【最頻出数字トップ5】
  1位:  3 - 7回出現 (17.5%), 最後の出現: 1回前
  2位: 12 - 7回出現 (17.5%), 最後の出現: 40回前
  3位: 14 - 7回出現 (17.5%), 最後の出現: 3回前

【よく出るペアトップ5】
  1位: 12-23 (7回)
  2位: 19-31 (7回)
  3位: 15-24 (7回)

【予測強度分析】
  HOT: 3, 12, 14, 15, 19, 20, 23
  OVERDUE: 1, 4, 5, 6, 9, 8, 11
```

### 推奨される組み合わせ例

```
第1組: 3, 12, 19, 23, 28, 35 | 合計=120, 奇数=3, 偶数=3
  ✓ HOT数字を4つ含む（3, 12, 19, 23）
  ✓ よく出るペアを含む（12-23, 19番）
  ✓ 合計値が推奨範囲内
  ✓ 奇数・偶数のバランスが良い
```

## 📉 期待値について

### 各宝くじの期待値

| 宝くじ | 1口価格 | 当選確率 | 期待値 |
|--------|---------|----------|--------|
| ロト6 (1等) | 200円 | 1/6,096,454 | -93円 |
| ナンバーズ3 (ストレート) | 200円 | 1/1,000 | -110円 |
| ナンバーズ3 (ミニ) | 200円 | 1/100 | -110円 |
| ナンバーズ4 (ストレート) | 200円 | 1/10,000 | -110円 |

**重要**: 全ての宝くじは期待値がマイナスです（還元率約50%）

### 当選確率の比較

最も当選しやすいのは **ナンバーズ3のミニ（1%）**

1. ナンバーズ3 ミニ: 1/100 (1%)
2. ナンバーズ3 ボックス: 6/1,000 (0.6%)
3. ナンバーズ3 ストレート: 1/1,000 (0.1%)
4. ナンバーズ4 ボックス: 24/10,000 (0.24%)
5. ナンバーズ4 ストレート: 1/10,000 (0.01%)
6. ロト6 1等: 1/6,096,454 (0.000016%)

## 🔧 カスタマイズ

### 自分のデータを使う

```typescript
import { DrawHistory } from '../src/utils/LotteryDataAnalyzer.js';

const myData: DrawHistory[] = [
  { drawNumber: 2100, drawDate: '2024-10-10', numbers: [7, 12, 19, 23, 31, 37] },
  // ... 過去データを追加
];

const analyzer = new LotteryDataAnalyzer(myData);
const report = analyzer.generateReport();
console.log(report);
```

### 予測数を変更

```typescript
input: {
  lotteryType: 'loto6',
  count: 10, // 5組 → 10組に変更
}
```

### CSV出力

```typescript
const analyzer = new LotteryDataAnalyzer(myData);
const csv = analyzer.exportToCSV();
// ファイルに保存するなど
```

## ⚠️ 注意事項

1. **予測は保証ではない**: この分析は統計的手法に基づくものですが、当選を保証するものではありません
2. **過去は未来を保証しない**: 各抽選は独立した事象です
3. **娯楽として楽しむ**: 宝くじは夢を買う娯楽と考えましょう
4. **自己責任で**: 購入は計画的に、予算内で行いましょう

## 📚 参考情報

### ロト6の基本
- 1-43から6つの数字を選ぶ
- 総組み合わせ数: 6,096,454通り
- 1等当選確率: 1/6,096,454
- 賞金: キャリーオーバー時最高6億円

### ナンバーズ3/4の基本
- ナンバーズ3: 000-999の3桁
- ナンバーズ4: 0000-9999の4桁
- ストレート: 数字と並び順が一致
- ボックス: 数字のみ一致（並び順不問）
- ミニ(N3のみ): 下2桁が一致

## 🎓 さらに学ぶ

### 統計的に有利な戦略

1. **バランスの取れた選択**
   - 奇数3-4個、偶数2-3個
   - 低い数字2-3個、高い数字3-4個
   - 合計値が平均±標準偏差の範囲内

2. **過去データの活用**
   - HOT数字を2-3個含める
   - OVERDUE数字を1-2個含める
   - よく出るペアを活用

3. **避けるべきパターン**
   - 連続番号ばかり（1,2,3,4,5,6）
   - 全て奇数または全て偶数
   - 合計値が極端に小さい/大きい

## 💾 データ収集

### 公式サイト
- [みずほ銀行 - ロト6](https://www.mizuhobank.co.jp/retail/takarakuji/loto/loto6/)
- [みずほ銀行 - ナンバーズ](https://www.mizuhobank.co.jp/retail/takarakuji/numbers/)

### データ形式

```typescript
const data: DrawHistory[] = [
  {
    drawNumber: 2100,        // 抽選回
    drawDate: '2024-10-10',  // 日付
    numbers: [7, 12, 19, 23, 31, 37],  // 当選番号
    bonusNumber: 15,         // ボーナス数字（ロト6のみ）
  },
];
```

---

**Happy Lottery Playing! 🍀**

良い結果をお祈りしています！（でも期待値は理解しておきましょう 😉）
